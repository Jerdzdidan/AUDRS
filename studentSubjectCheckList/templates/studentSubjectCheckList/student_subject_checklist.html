{% extends "home/layout.html" %}
{% load static %}

{% block style %}
  <!-- Your custom styles here -->
  <link rel="stylesheet" href="{% static 'subjects/main.css' %}">
{% endblock style %}

{% block body %}
<div class="container">
  <div class="d-flex justify-content-between border-bottom align-items-center">
    {% if request.user.role != "STUDENT" %}
      <h3>Student Subject Checklist - <span class="text-primary">Student Number: {{ student_profile.student_id }}</span></h3>
    {% else %}
      <h3>Student Subject Checklist - <span class="text-primary">Subject List</span></h3>
    {% endif %}
  </div>

  <!-- Nav tabs -->
  <ul class="nav nav-tabs mt-4" id="subjectTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active fw-bold" id="studentprofile-tab" data-bs-toggle="tab" data-bs-target="#studentprofile" type="button" role="tab" aria-controls="studentprofile" aria-selected="true">Student Profile</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link fw-bold" id="firstYear-tab" data-bs-toggle="tab" data-bs-target="#firstYear" type="button" role="tab" aria-controls="firstYear" aria-selected="true">1st Yr.</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link fw-bold" id="secondYear-tab" data-bs-toggle="tab" data-bs-target="#secondYear" type="button" role="tab" aria-controls="secondYear" aria-selected="false">2nd Yr.</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link fw-bold" id="thirdYear-tab" data-bs-toggle="tab" data-bs-target="#thirdYear" type="button" role="tab" aria-controls="thirdYear" aria-selected="false">3rd Yr.</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link fw-bold" id="fourthYear-tab" data-bs-toggle="tab" data-bs-target="#fourthYear" type="button" role="tab" aria-controls="fourthYear" aria-selected="false">4th Yr.</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link fw-bold" id="minorSub-tab" data-bs-toggle="tab" data-bs-target="#minorSub" type="button" role="tab" aria-controls="minorSub" aria-selected="false">MINOR SUBS</button>
    </li>
  </ul>

  <!-- Tab content -->
  <article class="tab-content content-section shadow-lg p-0" id="subjectTabsContent">
    {% include "subjects/subject_list_tabs/studentProfile.html" %}
    {% include "subjects/subject_list_tabs/firstYearSubjects.html" %}
    {% include "subjects/subject_list_tabs/secondYearSubjects.html" %}
    {% include "subjects/subject_list_tabs/thirdYearSubjects.html" %}
    {% include "subjects/subject_list_tabs/fourthYearSubjects.html" %}
    {% include "subjects/subject_list_tabs/minorSubjects.html" %}
  </article>
</div>
{% endblock body %}

{% block script %}
  <script>
    $('button[data-bs-toggle="tab"]').on('shown.bs.tab', function(e) {
      localStorage.setItem('activeTab', $(e.target).attr('data-bs-target'));
      $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
    });
    var activeTab = localStorage.getItem('activeTab');
    if(activeTab) {
      var someTabTriggerEl = document.querySelector('button[data-bs-target="' + activeTab + '"]');
      if(someTabTriggerEl) {
        var tab = new bootstrap.Tab(someTabTriggerEl);
        tab.show();
      }
    }
  </script>
{% endblock script %}
